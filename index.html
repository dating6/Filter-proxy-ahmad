<!DOCTYPE html>
<html>
<head>
    <title>Checking Connection...</title>
    <meta charset="UTF-8">
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
            background: #222; 
            color: #eee; 
            text-align: center; 
            padding-top: 100px; 
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØªØ­Ù…ÙŠÙ„ (ÙŠÙ„ÙŠ ÙÙŠÙ‡Ø§ Ø¬Ù…Ù„Ø© Ø³Ø¹ÙŠØ¯) */
        #loading-container {
            text-align: center;
        }
        
        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ø§Ù„Ø£Ø®Ø¶Ø± ÙˆØ§Ù„Ø£Ø­Ù…Ø±) */
        #results-container {
            display: none; /* Ù…Ø®ÙÙŠØ© Ø¨Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
            text-align: center;
        }

        /* ÙƒÙ„Ø§Ø³Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† */
        .text-green {
            color: #28a745;
        }
        .text-red {
            color: #dc3545;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø®Ø· Ù„Ù„Ù†ØªØ§Ø¦Ø¬ (Ø§Ù„Ø£Ø®Ø¶Ø± ÙˆØ§Ù„Ø£Ø­Ù…Ø±) */
        .result-text {
            font-size: 26px;
            font-weight: 700;
            margin: 10px 0;
            line-height: 1.4;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø®Ø· Ù„Ø¬Ù…Ù„Ø© Ø³Ø¹ÙŠØ¯ */
        .saeed-text {
            font-size: 24px;
            font-weight: 500;
        }

        .spinner { 
            border: 4px solid #f3f3f3; 
            border-top: 4px solid #3498db; 
            border-radius: 50%; 
            width: 40px; 
            height: 40px; 
            animation: spin 1s linear infinite; 
            margin-top: 20px; 
        }
        @keyframes spin { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        }
    </style>
</head>
<body>

    <div id="loading-container">
        <h1 class="saeed-text">Ø³Ø¹ÙŠØ¯ ÙŠØ§ Ø³Ø¹ÙŠØ¯ Ø§Ø³ØªÙ†Ù‰ Ø´ÙˆÙŠ Ù„Ù†ÙØ­Øµ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ ÙŠØ§ Ø­Ø¨ÙŠØ¨ÙŠ ğŸ˜</h1>
        <div class="spinner"></div>
    </div>

    <div id="results-container">
        <h2 id="proxy-type" class="result-text"></h2>
        <h2 id="proxy-quality" class="result-text"></h2>
    </div>


    <script>
        // --- Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ ---
        const TARGET_URL_CLEAN = "https://omjw2.bemobtrcks.com/go/aa1580be-1693-445d-800d-1986cbd284c4?bid=[bid]&clickid=[clickid]&campaignid=1092434&campaignname=avg-cpi-camping-filter&siteid=520804&category=software&connection=[connection]&os=[operatingsystem]&device=[device]&browser=[browser]&country=[cc]";
        const TARGET_URL_PROXY = "https://google.com"; 
        const API_KEY = "9a30j1-ia8bq4-62sjl1-836307"; // Ù…ÙØªØ§Ø­Ùƒ
        const REDIRECT_DELAY = 5000; // Ù…Ø¯Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‚Ø¨Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ (5 Ø«ÙˆØ§Ù†ÙŠ)

        // --- Ø¬Ù„Ø¨ Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø© ---
        const loadingContainer = document.getElementById('loading-container');
        const resultsContainer = document.getElementById('results-container');
        const proxyTypeEl = document.getElementById('proxy-type');
        const proxyQualityEl = document.getElementById('proxy-quality');

        // --- (Ù†ÙØ³ ÙƒÙˆØ¯ Ø§Ù„ÙØ­Øµ "Ø§Ù„Ù…ØªØ³Ø§Ù‡Ù„" Ù…Ù† Ø§Ù„Ø±Ø¯ 16) ---

        (function() {
            fetch('https://api.ipify.org?format=json')
                .then(response => response.json())
                .then(data => {
                    checkProxyStatus(data.ip);
                })
                .catch(error => {
                    console.error("Error fetching IP. Failing open.", error);
                    window.location.replace(TARGET_URL_CLEAN); 
                });
        })();

        function checkProxyStatus(visitor_ip) {
            const api_url = `https://proxycheck.io/v2/${visitor_ip}?key=${API_KEY}&vpn=1`;

            fetch(api_url)
                .then(response => response.json())
                .then(data => {
                    let is_fraud = false;
                    
                    if (data.status === 'ok' && data[visitor_ip]) {
                        if (data[visitor_ip].proxy === 'yes') {
                            is_fraud = true;
                        }
                        if (data[visitor_ip].type === 'VPN') {
                            is_fraud = true;
                        }
                    } else if (data.status === 'error') {
                        console.error("API Error:", data.message);
                        is_fraud = false; 
                    }

                    // --- 3. Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¬Ø¯ÙŠØ¯: Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø«Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„ ---
                    
                    // Ø¥Ø®ÙØ§Ø¡ Ø­Ø§ÙˆÙŠØ© "Ø³Ø¹ÙŠØ¯"
                    loadingContainer.style.display = 'none';

                    if (is_fraud) {
                        // --- Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ (Ø£Ø­Ù…Ø±) ---
                        proxyTypeEl.textContent = 'Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ : Ù…ÙƒØ´ÙˆÙ Ù†ÙˆØ¹Ø§ Ù…Ø§';
                        proxyQualityEl.textContent = 'Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ : Ø²Ø¨Ø§Ù„Ø© Ø­Ø§Ø´Ø§Ùƒ ... Ø±Ø­ Ù†Ù…Ù†Ø¹Ùƒ Ù…Ù† ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·';
                        resultsContainer.className = 'text-red'; 
                        resultsContainer.style.display = 'block'; 
                        
                        setTimeout(() => {
                            window.location.replace(TARGET_URL_PROXY);
                        }, REDIRECT_DELAY);

                    } else {
                        // --- Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸ÙŠÙ (Ø£Ø®Ø¶Ø±) ---
                        proxyTypeEl.textContent = 'Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ : Ø±ÙŠØ²ÙŠØ¯Ù†ØªØ§Ù„ ÙŠØ§ ÙƒØ¨ÙŠØ±';
                        proxyQualityEl.textContent = 'Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ : Ù†Ø¸ÙŠÙ Ø§Ù…ÙˆØ±Ø±Ùˆ Ø±ÙˆØ§Ù‚.';
                        resultsContainer.className = 'text-green'; 
                        resultsContainer.style.display = 'block'; 

                        setTimeout(() => {
                            window.location.replace(TARGET_URL_CLEAN);
                        }, REDIRECT_DELAY);
                    }
                })
                .catch(error => {
                    console.error("Error checking proxy. Failing open.", error);
                    window.location.replace(TARGET_URL_CLEAN); 
                });
        }
    </script>

</body>
</html>
