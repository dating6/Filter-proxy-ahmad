<!DOCTYPE html>
<html>
<head>
    <title>Checking Connection...</title>
    <meta charset="UTF-8">
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
            background: #222; 
            color: #eee; 
            text-align: center; 
            padding-top: 100px; 
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        #loading-container { text-align: center; }
        #results-container { display: none; text-align: center; }
        
        /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† */
        .text-green { color: #28a745; }
        .text-red { color: #dc3545; }
        .text-orange { color: #fd7e14; } /* !! Ù„ÙˆÙ† Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø¬Ø¯ÙŠØ¯ !! */

        .result-text { font-size: 26px; font-weight: 700; margin: 10px 0; line-height: 1.4; }
        .saeed-text { font-size: 24px; font-weight: 500; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin-top: 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="loading-container">
        <h1 class="saeed-text">Ø³Ø¹ÙŠØ¯ ÙŠØ§ Ø³Ø¹ÙŠØ¯ Ø§Ø³ØªÙ†Ù‰ Ø´ÙˆÙŠ Ù„Ù†ÙØ­Øµ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ ÙŠØ§ Ø­Ø¨ÙŠØ¨ÙŠ ğŸ˜</h1>
        <div class="spinner"></div>
    </div>

    <div id="results-container">
        <h2 id="proxy-type" class="result-text"></h2>
        <h2 id="proxy-quality" class="result-text"></h2>
    </div>


    <script>
        // !! Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ HTML Ø§Ù„ØµÙØ­Ø© !!
        document.addEventListener('DOMContentLoaded', function() {
            
            console.log("DOM Ø¬Ø§Ù‡Ø²ØŒ Ø§Ù„ÙƒÙˆØ¯ Ø±Ø­ ÙŠØ´ØªØºÙ„ Ù‡Ù„Ø£.");

            // --- Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ ---
            const TARGET_URL_CLEAN = "https://omjw2.bemobtrcks.com/go/aa1580be-1693-445d-800d-1986cbd284c4?bid=[bid]&clickid=[clickid]&campaignid=1092434&campaignname=avg-cpi-camping-filter&siteid=520804&category=software&connection=[connection]&os=[operatingsystem]&device=[device]&browser=[browser]&country=[cc]";
            const TARGET_URL_PROXY = "https://google.com"; 
            const API_KEY = "9a30j1-ia8bq4-62sjl1-836307"; // Ù…ÙØªØ§Ø­ proxycheck.io
            const REDIRECT_DELAY = 5000; // 5 Ø«ÙˆØ§Ù†ÙŠ

            // --- Ø¬Ù„Ø¨ Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø© ---
            const loadingContainer = document.getElementById('loading-container');
            const resultsContainer = document.getElementById('results-container');
            const proxyTypeEl = document.getElementById('proxy-type');
            const proxyQualityEl = document.getElementById('proxy-quality');

            // --- !! 1. ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© !! ---
            // Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ© ØªØ¸Ù‡Ø± Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ ÙˆØªÙˆÙ‚Ù ÙƒÙ„ Ø´ÙŠØ¡
            function showResultsError() {
                console.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙØ­Øµ. Ù„Ù† ÙŠØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„.");
                loadingContainer.style.display = 'none';
                
                proxyTypeEl.textContent = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙØ­Øµ';
                proxyQualityEl.textContent = 'Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ. Ù„Ù† ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ.';
                resultsContainer.className = 'text-orange'; // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ
                resultsContainer.style.display = 'block'; 
                // Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ­ÙˆÙŠÙ„ (No Redirect)
            }

            // --- 2. ÙˆØ¸ÙŠÙØ© Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ù†Ø¸ÙŠÙØ© Ø£Ùˆ Ø¨Ø±ÙˆÙƒØ³ÙŠ) ---
            function showResults(is_fraud) {
                console.log("Ø§Ù„Ù†ØªÙŠØ¬Ø©:", is_fraud ? "Ø¨Ø±ÙˆÙƒØ³ÙŠ" : "Ù†Ø¸ÙŠÙ");
                loadingContainer.style.display = 'none';

                if (is_fraud) {
                    proxyTypeEl.textContent = 'Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ : Ù…ÙƒØ´ÙˆÙ Ù†ÙˆØ¹Ø§ Ù…Ø§';
                    proxyQualityEl.textContent = 'Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ : Ø²Ø¨Ø§Ù„Ø© Ø­Ø§Ø´Ø§Ùƒ ... Ø±Ø­ Ù†Ù…Ù†Ø¹Ùƒ Ù…Ù† ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·';
                    resultsContainer.className = 'text-red'; 
                    resultsContainer.style.display = 'block'; 
                    setTimeout(() => { window.location.replace(TARGET_URL_PROXY); }, REDIRECT_DELAY);
                } else {
                    proxyTypeEl.textContent = 'Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ : Ø±ÙŠØ²ÙŠØ¯Ù†ØªØ§Ù„ ÙŠØ§ ÙƒØ¨ÙŠØ±';
                    proxyQualityEl.textContent = 'Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ : Ù†Ø¸ÙŠÙ Ø§Ù…ÙˆØ±Ø±Ùˆ Ø±ÙˆØ§Ù‚.';
                    resultsContainer.className = 'text-green'; 
                    resultsContainer.style.display = 'block'; 
                    setTimeout(() => { window.location.replace(TARGET_URL_CLEAN); }, REDIRECT_DELAY);
                }
            }

            // --- 3. ÙˆØ¸ÙŠÙØ© ÙØ­Øµ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ (Ù…Ø¹Ø¯Ù„Ø© Ù„Ù„Ø£Ù…Ø§Ù†) ---
            function checkProxyStatus(visitor_ip) {
                console.log("Ø¨Ø¯Ø£ ÙØ­Øµ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ Ù„Ù€:", visitor_ip);
                const api_url = `https://proxycheck.io/v2/${visitor_ip}?key=${API_KEY}&vpn=1`;

                fetch(api_url)
                    .then(response => response.json())
                    .then(data => {
                        console.log("ÙˆØµÙ„ Ø§Ù„Ø±Ø¯ Ù…Ù† proxycheck:", data);
                        let is_fraud = false;
                        
                        if (data.status === 'ok' && data[visitor_ip]) {
                            if (data[visitor_ip].proxy === 'yes' || data[visitor_ip].type === 'VPN') {
                                is_fraud = true;
                            }
                            showResults(is_fraud); // Ø§Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© (Ø­Ù…Ø±Ø§ Ø£Ùˆ Ø®Ø¶Ø±Ø§)

                        } else if (data.status === 'error') {
                            // !! Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§ !!
                            console.error("API Error:", data.message);
                            showResultsError(); // Ø§Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠØ©
                        } else {
                            // Ø­Ø§Ù„Ø© ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©
                            showResultsError();
                        }
                    })
                    .catch(error => {
                        // !! Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§ !!
                        console.error("Error checking proxy. Failing safe.", error);
                        showResultsError(); // Ø§Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠØ©
                    });
            }

            // --- 4. Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ù…Ø¹Ø¯Ù„ Ù„Ù„Ø£Ù…Ø§Ù†) ---
            (function() {
                console.log("Ø¨Ø¯Ø£ Ø¬Ù„Ø¨ Ø§Ù„Ù€ IP...");
                fetch('https://api.ipify.org?format=json')
                    .then(response => response.json())
                    .then(data => {
                        console.log("ØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ù€ IP:", data.ip);
                        checkProxyStatus(data.ip);
                    })
                    .catch(error => {
                        // !! Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§ !!
                        console.error("Error fetching IP. Failing safe.", error);
                        showResultsError(); // Ø§Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠØ©
                    });
            })();

        }); 
    </script>

</body>
</html>
