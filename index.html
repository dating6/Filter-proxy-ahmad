<!DOCTYPE html>
<html>
<head>
    <title>Checking Connection...</title>
    <meta charset="UTF-8">
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
            background: #222; 
            color: #eee; 
            text-align: center; 
            padding-top: 100px; 
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        h1 {
            font-size: 24px;
            font-weight: 500;
        }
        /* Simple spinner animation */
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-top: 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <h1>Ø³Ø¹ÙŠØ¯ Ø§Ø³ØªÙ†Ù‰ Ø´ÙˆÙŠ Ù„Ù†ÙØ­Øµ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ ØªØ¨Ø¹Ùƒ ÙŠØ§ Ø­Ø¨ÙŠØ¨ÙŠğŸ˜</h1>

    <div class="spinner"></div>

    <script>
        // --- Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ ---

        // 2. Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ø¸ÙŠÙ (ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«)
        const TARGET_URL_CLEAN = "https://omjw2.bemobtrcks.com/go/aa1580be-1693-445d-800d-1986cbd284c4?bid=[bid]&clickid=[clickid]&campaignid=1092434&campaignname=avg-cpi-camping-filter&siteid=520804&category=software&connection=[connection]&os=[operatingsystem]&device=[device]&browser=[browser]&country=[cc]"; 
        
        // 3. Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ (ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«)
        const TARGET_URL_PROXY = "https://google.com"; 

        // 4. Ù…ÙØªØ§Ø­ Ø§Ù„Ù€ API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
        const API_KEY = "9a30j1-ia8bq4-62sjl1-836307"; 
        // (ØªØ°ÙƒÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ù…ÙØªØ§Ø­ Ù…ÙƒØ´ÙˆÙØŒ Ù„ÙƒÙ†Ùƒ Ø£ÙƒØ¯Øª Ø£Ù† Ù‡Ø°Ø§ Ù…Ù‚Ø¨ÙˆÙ„ Ù„Ø­Ø§Ù„ØªÙƒ)

        // --- Ù„Ø§ ØªØ¹Ø¯Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø£Ø¯Ù†Ø§Ù‡ ---

        // 5. ÙˆØ¸ÙŠÙØ© Ø§Ù„ÙØ­Øµ ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„
        (function() {
            // Ø¬Ù„Ø¨ IP Ø§Ù„Ø²Ø§Ø¦Ø± Ø£ÙˆÙ„Ø§Ù‹
            fetch('https://api.ipify.org?format=json')
                .then(response => response.json())
                .then(data => {
                    // Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­ØŒ Ø£Ø±Ø³Ù„ Ø§Ù„Ù€ IP Ù„Ù„ÙØ­Øµ
                    checkProxyStatus(data.ip);
                })
                .catch(error => {
                    // Ø¥Ø°Ø§ ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ù€ IPØŒ Ù†Ø¹ØªØ¨Ø±Ù‡ "Ù†Ø¸ÙŠÙØ§Ù‹" ÙƒØ¥Ø¬Ø±Ø§Ø¡ Ø§Ø­ØªÙŠØ§Ø·ÙŠ
                    console.error("Error fetching IP:", error);
                    window.location.replace(TARGET_URL_CLEAN);
                });
        })();

        // 6. ÙˆØ¸ÙŠÙØ© ÙØ­Øµ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ
        function checkProxyStatus(visitor_ip) {
            // vpn=1 : Ù„ÙØ­Øµ Ø§Ù„Ù€ VPN Ø£ÙŠØ¶Ø§Ù‹
            const api_url = `https://proxycheck.io/v2/${visitor_ip}?key=${API_KEY}&vpn=1`;

            fetch(api_url)
                .then(response => response.json())
                .then(data => {
                    let is_proxy = false;
                    
                    if (data.status === 'ok' && data[visitor_ip]) {
                        // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¨Ø±ÙˆÙƒØ³ÙŠ Ø£Ùˆ VPN
                        if (data[visitor_ip].proxy === 'yes' || data[visitor_ip].type === 'VPN') {
                            is_proxy = true;
                        }
                    }
                    
                    if (is_proxy) {
                        // Ø¥Ù†Ù‡ Ø¨Ø±ÙˆÙƒØ³ÙŠ! Ø­ÙˆÙ„Ù‡ Ø¥Ù„Ù‰ Ø¬ÙˆØ¬Ù„
                        window.location.replace(TARGET_URL_PROXY);
                    } else {
                        // Ø§Ù„Ø²Ø§Ø¦Ø± Ù†Ø¸ÙŠÙØŒ Ø­ÙˆÙ„Ù‡ Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
                        window.location.replace(TARGET_URL_CLEAN);
                    }
                })
                .catch(error => {
                    // Ø¥Ø°Ø§ ÙØ´Ù„ ÙØ­Øµ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ (Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø­ØµØ©ØŒ Ø®Ø·Ø£ Ø¨Ø§Ù„Ø´Ø¨ÙƒØ©)
                    // Ù†Ø¹ØªØ¨Ø±Ù‡ "Ù†Ø¸ÙŠÙØ§Ù‹" ÙƒØ¥Ø¬Ø±Ø§Ø¡ Ø§Ø­ØªÙŠØ§Ø·ÙŠ
                    console.error("Error checking proxy:", error);
                    window.location.replace(TARGET_URL_CLEAN);
                });
        }
    </script>

</body>
</html>
